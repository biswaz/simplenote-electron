(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1148:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(1139);function c(){return o.a.createElement("svg",{className:"icon-feed",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M2,8.667V12c5.515,0,10,4.485,10,10h3.333C15.333,14.637,9.363,8.667,2,8.667z M2,2v3.333 c9.19,0,16.667,7.477,16.667,16.667H22C22,10.955,13.045,2,2,2z M4.5,17C3.118,17,2,18.12,2,19.5S3.118,22,4.5,22S7,20.88,7,19.5 S5.882,17,4.5,17z"}))}var l,u,p=n(8),d=n.n(p),f=n(3),m=n(9),h=n(14),y=n(15),v=n(128),g=new Map,b=(l=function(e){return e.data.modificationDate},u=v.a,function(e){var t=g.get(e.id),n=l(e);if(void 0===t||n!==t.key){var r={key:n,value:u(e)};g.set(e.id,r),t=r}return t.value}),w=n(813),N=n.n(w),E=n(671),S=n(126),k=n(589),x=function(e,t){return e.reduce((function(e,t){var n=t.filter,r=t.replacer,o="string"==typeof n&&Object(S.d)(n),a=o&&o.length>0?new RegExp(Object(f.escapeRegExp)(o),"gi"):n;return N()(e,a,r)}),t).map((function(e,t){return e&&"string"!=typeof e?o.a.cloneElement(e,{key:t}):e}))},O={filter:k.b,replacer:function(e){var t=/x/i.test(e);return o.a.createElement(E.a,{checked:t})}},j=function(e){return{filter:e,replacer:function(e){if(e.length)return o.a.createElement("span",{className:"search-match"},e)}}};function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?q(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=h.a.actionCreators,I=L.search,M=L.setSearchFocus,z=y.tracks.recordEvent,F=function(e){function t(){var e,n;T(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return A(q(n=P(this,(e=_(t)).call.apply(e,[this].concat(o)))),"updateSearch",(function(e){var t=n.props,r=t.query,o=t.onSearch,a=r.trim().split(" ");a.splice(-1,1,e);var i=a.join(" ");o(i+=" ")})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.filteredTags;return o.a.createElement(r.Fragment,null,t.length>0&&o.a.createElement("div",{className:"tag-suggestions"},o.a.createElement("div",{className:"note-list-header"},"Search by Tag"),o.a.createElement("ul",{className:"tag-suggestions-list"},t.map((function(t){return o.a.createElement("li",{key:t.id,id:t.id,className:"tag-suggestion-row",onClick:function(){return e.updateSearch("tag:".concat(t.data.name))}},o.a.createElement("div",{className:"tag-suggestion",title:t.data.name},"tag:",t.data.name))})))))}}])&&C(n.prototype,a),i&&C(n,i),t}(r.Component);A(F,"displayName","TagSuggestions"),A(F,"propTypes",{filteredTags:i.a.array.isRequired,onSearch:i.a.func.isRequired,query:i.a.string.isRequired});var B=function(e,t){var n=t.trim().split(" ").pop();if(!n)return e;var r=n.startsWith("tag:")&&n.length>4,o=r?n.slice(4):n;return function(e,t,n){var r=[],o=!0,a=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;if(t(l)&&r.push(l),r.length===n)break}}catch(e){a=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,r?function(e){var t=e.data.name;return t!==o&&t.startsWith(o)}:function(e){return e.data.name.includes(o)},5)},H=null,U=null,W=[],K=function(e,t){return H===e&&U===t?W:(H=e,U=t,W=B(e,t))},J=Object(m.b)((function(e){var t=e.appState;return{filteredTags:K(t.tags,t.filter),query:t.filter}}),(function(e){return{onSearch:function(t){e(I({filter:t})),z("list_notes_searched"),e(M({searchFocus:!0}))}}}))(F);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?Z(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"NoteList",(function(){return ce})),s.a.displayName="AutoSizer",s.b.displayName="List";var re={comfy:1,condensed:0,expanded:4};function oe(e,t){var n=oe.canvas||(oe.canvas=document.createElement("canvas"));n.width=t;var r=n.getContext("2d");return r.font="16px arial",r.measureText(e).width}var ae,ie=new Map,se=(ae=function(e,t,n){if("condensed"===t)return 42;var r=Math.ceil(oe(n,e-24)/(e-24));return 42+21*Math.min(re[t],r)},function(e,t){var n=t.noteDisplay,r=t.tagResultsFound,o=t.width;return function(t){var a=t.index,i=e[a];switch(i){case"notes-header":return 28;case"tag-suggestions":return 28+40*r;case"no-notes":return 200}var s=b(i).preview,c=i.id,l=ie.get(c);if(void 0!==l){var u=ne(l,4),p=u[0],d=u[1],f=u[2],m=u[3];if(p===o&&d===n&&f===s)return m}var h=ae(o,n,s);return ie.set(c,[o,n,s,h]),h}}),ce=function(e){function t(){var e,n;V(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return ee(Z(n=Q(this,(e=Y(t)).call.apply(e,[this].concat(a)))),"list",Object(r.createRef)()),ee(Z(n),"handleShortcut",(function(e){var t=e.ctrlKey,r=e.key,o=e.metaKey,a=e.shiftKey,i=t||o;return i&&a&&("ArrowUp"===r||"k"===r)?(n.props.onSelectNote(n.props.nextNote.id),e.stopPropagation(),e.preventDefault(),!1):!i||!a||"ArrowDown"!==r&&"j"!==r||(n.props.onSelectNote(n.props.prevNote.id),e.stopPropagation(),e.preventDefault(),!1)})),ee(Z(n),"toggleShortcuts",(function(e){e?window.addEventListener("keydown",n.handleShortcut,!0):window.removeEventListener("keydown",n.handleShortcut,!0)})),ee(Z(n),"onPinNote",(function(e){return n.props.onPinNote(e,!e.data.systemTags.includes("pinned"))})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.recomputeHeights=Object(f.debounce)((function(){return e.list.current&&e.list.current.recomputeRowHeights()}),70,{maxWait:1e3}),this.toggleShortcuts(!0),window.addEventListener("resize",this.recomputeHeights)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.closeNote,r=t.filter,o=t.notes,a=(t.onSelectNote,t.selectedNoteId);e.filter===this.props.filter&&e.noteDisplay===this.props.noteDisplay&&e.notes===o&&e.selectedNoteContent===this.props.selectedNoteContent||this.recomputeHeights(),r!==e.filter&&(o.some((function(e){return e.id===a}))||n())}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1),window.removeEventListener("resize",this.recomputeHeights)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filter,a=t.hasLoaded,i=t.selectedNoteId,l=t.onNoteOpened,u=t.onSelectNote,p=t.onEmptyTrash,m=t.noteDisplay,h=t.showTrash,y=t.tagResultsFound,v=t.notes,g=t.isSmallScreen,w=d()("note-list-items",m),N=function(e,t){var n=t.filter,r=t.noteDisplay,a=t.selectedNoteId,i=t.onNoteOpened,s=t.onSelectNote,l=t.onPinNote,u=t.isSmallScreen;return function(t){var p=t.index,m=t.rowIndex,h=t.key,y=t.style,v=e[void 0===p?m:p];switch(v){case"notes-header":return o.a.createElement("div",{key:h,style:y,className:"note-list-header"},"Notes");case"tag-suggestions":return o.a.createElement("div",{key:h,style:y},o.a.createElement(J,null));case"no-notes":return o.a.createElement("div",{key:h,style:y,className:"note-list is-empty"},o.a.createElement("span",{className:"note-list-placeholder"},"No Notes"))}var g=b(v),w=g.title,N=g.preview,E=!Object(f.isEmpty)(v.data.publishURL),S=d()("note-list-item",{"note-list-item-selected":!u&&a===v.id,"note-list-item-pinned":v.data.systemTags.includes("pinned"),"published-note":E}),k=[O,j(n)];return o.a.createElement("div",{key:h,style:y,className:S},o.a.createElement("div",{className:"note-list-item-pinner",tabIndex:0,onClick:l.bind(null,v)}),o.a.createElement("div",{className:"note-list-item-text theme-color-border",tabIndex:0,onClick:function(){s(v.id),i()}},o.a.createElement("div",{className:"note-list-item-title"},o.a.createElement("span",null,x(k,w)),E&&o.a.createElement("div",{className:"note-list-item-published-icon"},o.a.createElement(c,null))),"condensed"!==r&&N.trim()&&o.a.createElement("div",{className:"note-list-item-excerpt"},x(k,N))))}}(v,{filter:n,noteDisplay:m,onNoteOpened:l,onSelectNote:u,onPinNote:this.onPinNote,selectedNoteId:i,isSmallScreen:g}),E=0===v.length,S=o.a.createElement("div",{className:"note-list-empty-trash theme-color-border"},o.a.createElement("button",{type:"button",className:"button button-borderless button-danger",onClick:p},"Empty Trash"));return o.a.createElement("div",{className:d()("note-list",{"is-empty":E})},E?o.a.createElement("span",{className:"note-list-placeholder"},a?"No Notes":"Loading Notes"):o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:w},o.a.createElement(s.a,null,(function(t){var r=t.height,a=t.width;return o.a.createElement(s.b,{ref:e.list,estimatedRowSize:42+21*re[m],height:r,noteDisplay:m,notes:v,rowCount:v.length,rowHeight:se(v,{filter:n,noteDisplay:m,tagResultsFound:y,width:a}),rowRenderer:N,width:a})}))),!!h&&S))}}])&&G(n.prototype,a),i&&G(n,i),t}(r.Component);ee(ce,"displayName","NoteList"),ee(ce,"propTypes",{closeNote:i.a.func.isRequired,filter:i.a.string.isRequired,tagResultsFound:i.a.number.isRequired,isSmallScreen:i.a.bool.isRequired,notes:i.a.array.isRequired,onNoteOpened:i.a.func.isRequired,onSelectNote:i.a.func.isRequired,onPinNote:i.a.func.isRequired,noteDisplay:i.a.string.isRequired,onEmptyTrash:i.a.any.isRequired,showTrash:i.a.bool});var le=h.a.actionCreators,ue=le.closeNote,pe=le.emptyTrash,de=le.loadAndSelectNote,fe=le.pinNote,me=y.tracks.recordEvent;ce.propTypes={hasLoaded:i.a.bool.isRequired,nextNote:i.a.object,prevNote:i.a.object,selectedNoteContent:i.a.string};t.default=Object(m.b)((function(e){var t=e.appState,n=e.ui,r=n.filteredNotes,o=n.note,a=e.settings.noteDisplay,i=K(t.tags,t.filter).length,s=o,c=null==s?void 0:s.id,l=r.findIndex((function(e){return e.id===c})),u=Math.max(0,l-1),p=Math.min(r.length-1,l+1),d=r[u],m=r[p],h=function(e,t,n){return 0===t.length||0===n?e:["tag-suggestions","notes-header"].concat(te(e.length>0?e:["no-notes"]))}(r,t.filter,i),y=s&&b(s).preview;return{filter:t.filter,hasLoaded:null!==t.notes,nextNote:d,noteDisplay:a,notes:h,prevNote:m,selectedNotePreview:y,selectedNoteContent:Object(f.get)(s,"data.content"),selectedNoteId:c,showTrash:t.showTrash,tagResultsFound:i}}),(function(e,t){var n=t.noteBucket;return{closeNote:function(){return e(ue())},onEmptyTrash:function(){return e(pe({noteBucket:n}))},onSelectNote:function(t){t&&(e(de({noteBucket:n,noteId:t})),me("list_note_opened"))},onPinNote:function(t,r){return e(fe({noteBucket:n,note:t,pin:r}))}}}))(ce)},589:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r={taskNode:".task-list-item",markdownRoot:"[data-markdown-root]"},o=/^(\s*)(-[ \t]+\[[xX\s]?\])/gm,a=/^(\s*)(-[ \t]+\[[xX\s]?\])(.+)/gm},671:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),i=n.n(a);function s(){return o.a.createElement("svg",{className:"icon-checkmark",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M11,17.768l-4.884-4.884l1.768-1.768L11,14.232l8.658-8.658C17.823,3.391,15.075,2,12,2C6.477,2,2,6.477,2,12 s4.477,10,10,10s10-4.477,10-10c0-1.528-0.353-2.971-0.966-4.266L11,17.768z"}))}function c(){return o.a.createElement("svg",{className:"icon-circle",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24"},o.a.createElement("g",{transform:"translate(2 2)"},o.a.createElement("path",{d:"m10 0c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10zm0 18.5c-4.694 0-8.5-3.806-8.5-8.5s3.806-8.5 8.5-8.5 8.5 3.806 8.5 8.5-3.806 8.5-8.5 8.5z"})))}var l=function(e){var t=e.checked,n=void 0!==t&&t,r=e.onChange;return o.a.createElement("span",{className:"checkbox",role:"checkbox","aria-checked":n,onClick:r,tabIndex:"0"},o.a.createElement("span",{className:"checkbox__icon","aria-hidden":"true"},n?o.a.createElement(s,null):o.a.createElement(c,null)))};l.propTypes={checked:i.a.bool,onChange:i.a.func};t.a=l}}]);